﻿﻿﻿﻿工作日志：##日期2019/9/2##工作内容：### 1.完成对话框构建### 2.完成文件读取与储存### 3.构建游戏基本内容>1.界面：>>任务，角色，背包，成就，剧情，菜单>2.背包：>>装备，材料，消耗品>>>装备：武器（主属性：攻击，暴击）头盔（主属性：血量）护甲（主属性：防御）鞋子（主属性：敏捷）戒指（主属性：魔力）称号（无主属性） 装备可以组成套装（套装提供不同的属性加成）>>>材料：强化材料（升级装备）觉醒材料（升级人物）其中强化材料可以强化背包提高背包容量>>>消耗品：回血，回蓝，BUFF>>>>BULL可以加经验，金币和属性>3.属性：>>攻击，魔力，暴击，生命，防御，幸运，敏捷，洞察>>>攻击：装备属性加成+角色基本属性+角色等级*角色成长属性+BUFF属性加成>>>魔力：装备属性加成+角色基本属性+角色等级*角色成长属性+BUFF属性加成>>>暴击：装备属性加成+BUFF属性加成>>>生命：装备属性加成+角色基本属性+角色等级*角色成长属性+BUFF属性加成>>>防御：装备属性加成+角色基本属性+角色等级*角色成长属性+BUFF属性加成>>>敏捷：装备属性加成+角色基本属性+BUFF属性加成>>>洞察：完成剧情人物获得（该属性为团队属性）>4.角色：>>显示面板：>>>属性和成长属性面板，装备面板，等级和经验面板，技能面板>>人物库（暂定）>5.成就：（暂定）>6.合成：（暂定）>7.菜单：>>退出，保存，读档，音乐>>>退出：退出游戏并存档>>>保存：存档>>>读档：读取存档>>>音乐：打开或关闭音乐>8.剧情：>>剧情线索：由剧情任务或战斗随机掉落，仅可获得一次>9.任务：>>剧情任务（主线）：暂定>>支线任务：暂定>10.战斗：>>我方角色，敌方角色，我方回合，敌方回合>>行动：>>>行动值=角色敏捷值>>>由敌我双方单个角色的行动值从高至低行动，完成行动的角色行动值降为0，在下一回合恢复，若当前回合行动值被改变为大于0则再次进入该回合（例如：当角色A完成行动，A的敏捷属性为0，B对A释放加速技能（行动值加10）则A的行动值变为10，A在该回合继续行动直到行动值为0）>>伤害：>>>暴击：进行暴击率判定（概率为暴击率），判断通过则暴击>>>>暴击伤害 = 50%*攻击>>>真实伤害：进行真是伤害判定（技能效果等），判定通过则造成真实伤害>>>>真实伤害 = A的攻击+（A的暴击伤害）>>>伤害 = A的攻击 - B 的防御+（A的暴击伤害）>>生命：>>>掉血：受到攻击时血量减少>>>>生命 = 生命 - 伤害（最小为0）>>>回血：收到治疗效果血量增加>>>>生命 = 生命 + 治疗（最大为该角色的生命上限）>>死亡：生命小于等于0则角色死亡，退出本次战斗>>存活：生命大于0则存活，继续战斗>>回合：所有角色行动完成后进入下一回合>>>角色回合：角色行动一次，攻击动作，使用消耗品，使用技能等##遇到问题：`def load_file():    """存档读取"""    if not os.path.exists('fileSave.json'):        with open('fileSave.json', 'a') as f:            characters = []            drug = []            dic = {'plot': 0, 'money': 0, 'characters': characters, 'drug': drug}            dic = json.dumps(dic, indent=4, ensure_ascii=False)            f.write(dic)    with open('fileSave.json', 'r', encoding='utf-8') as file_object:        contents = json.load(file_object)    return contentsdef down_file(contents):    """保存存档"""    contents = json.dumps(contents, indent=4, ensure_ascii=False)    with open('fileSave.json', 'w', encoding='utf-8') as file_object:        """覆盖原存档"""        file_object.write(contents)`在`dump`的时候也加上`ensure_ascii=False`,不然会变成ascii码写到文件中，如下：`{    "Desc": "\u767b\u5f55\u57fa\u51c6\u6d4b\u8bd5",    "InputArg": {        "passwd": "123456",        "username": "\u738b\u5c0f\u4e2b"    },    "Method": "post",    "Result": {        "errorno": "0"    },    "TestId": "testcase001",    "Title": "\u767b\u5f55\u6d4b\u8bd5",    "Url": "http://xxx.xxx.xxx.xx"}`在打开文件的时候要加上encoding=‘utf-8’，不然会显示成乱码,如下：`{    "Desc": "��¼��׼����",    "InputArg": {        "passwd": "123456",        "username": "��СѾ"    },    "Method": "post",    "Result": {        "errorno": "0"    },    "TestId": "testcase001",    "Title": "��¼����",    "Url": "http://xxx.xxx.xxx.xx"}`